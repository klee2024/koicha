<ng-container *ngIf="productCardData as card">
  <div
    class="product-card-main relative overflow-hidden rounded-[10px]"
    (click)="card.variant === 'review' && reviewSelected.emit(card)"
  >
    <!-- TODO: make a default image in case the image does not load for the product -->
    <img
      [src]="card.image_url"
      id="product-image"
      [alt]="card.name"
      class="block h-full w-full object-cover"
    />
    <div class="absolute inset-0 flex flex-col justify-between">
      <div class="flex items-start justify-between gap-2 p-4">
        <div class="exit-button" *ngIf="exit">
          <button
            id="close-product-card"
            class="rounded-full bg-white/80 px-2 py-1 text-xs uppercase tracking-wide text-black backdrop-blur"
          >
            close
          </button>
        </div>
        <div
          *ngIf="card.variant === 'review' && productUserRanking != undefined"
          class="flex font-sans font-medium"
        >
          {{ productUserRanking + 1 }}
        </div>
        <div></div>
        <!--empty div for styling purposes-->
        <div class="product-card-buttons flex gap-3">
          <button
            class="bookmark flex items-center gap-2 rounded-full bg-white/80 px-4 py-2 text-sm uppercase tracking-wide text-black backdrop-blur"
            (click)="$event.stopPropagation(); productToBookmark.emit(card)"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="1.5"
              class="h-4 w-4"
              aria-hidden="true"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0Z"
              />
            </svg>
          </button>
          <!-- TODO: update with appropriate symbols -->
          <button
            class="userReview flex items-center gap-2 rounded-full bg-white/80 px-4 py-2 text-sm uppercase tracking-wide text-black backdrop-blur"
            (click)="$event.stopPropagation(); productToReview.emit(card)"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="h-4 w-4"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M12 4.5v15m7.5-7.5h-15"
              />
            </svg>
          </button>
          <!-- TODO: update with appropriate symbols -->
        </div>
      </div>

      <app-product-card-content
        [productCardData]="card"
      ></app-product-card-content>
    </div>
  </div>
</ng-container>
